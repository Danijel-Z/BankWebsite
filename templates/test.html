{% extends 'index.html' %} {% block title %} Test {% endblock title %} {% block
individualCSS %} {% endblock individualCSS %} {% block main %}

<div class="content-wrapper">
  <div class="page-header">
    <h3 class="page-title">Test</h3>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Databas</a></li>
        <li class="breadcrumb-item active" aria-current="page">Test</li>
      </ol>
    </nav>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-6 grid-margin">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Customer finder</h4>
          <p class="card-description"></p>
          <div>
            <form method="get" class="input-group">
              <input
                type="text"
                name="customer_id"
                value="{{customer_id}}"
                class="form-control"
                placeholder="Enter Customer ID"
                aria-label="Recipient's username"
                aria-describedby="basic-addon2"
              />
              <div class="input-group-append">
                <button class="btn btn-md btn-primary" type="submit">
                  Find
                </button>
              </div>
            </form>
          </div>
          {% if foundedCustomer %}
          <div class="card mt-1 bg-dark border border-primary">
            <div class="pt-2 pl-1">
              <div class="form-inline">
                <h3 class="text-primary pr-2">ID:</h3>
                <p class="h3 text-light">{{foundedCustomer.id}}</p>
              </div>
              <p class="text-info">
                Name & age:
                <code
                  >{{foundedCustomer.GivenName}} {{foundedCustomer.Surname}},
                  {{customer_age}}</code
                >
                <br />
                Birthday:
                <code>{{foundedCustomer.Birthday.strftime('%Y-%m-%d')}} </code>
                <br />

                Adress:
                <code>
                  {{foundedCustomer.Streetaddress}},
                  {{foundedCustomer.City}}</code
                >
                <br />

                Country:
                <code>
                  {{foundedCustomer.Country}}, {{foundedCustomer.Zipcode}}</code
                >
                <br />
                Telephone:
                <code>{{foundedCustomer.Telephone}} </code>
                <br />

                Email:
                <code>{{foundedCustomer.EmailAddress}} </code>
              </p>
              <p class="text-info">
                Number of Accounts:
                <code> {{foundedCustomer.Accounts|length }} </code> <br />
                Total Accounts Money: <code> {{totalMoneyFromAccounts}} </code>
              </p>
              <div
                class="flex-row flex-wrap d-flex justify-content-between pb-2 pr-1"
              >
                {% for number in range(foundedCustomer.Accounts|length) %}
                <a
                  href="{{ url_for('transaction', account_id = foundedCustomer.Accounts[number].id, customer_id = customer_id )}}"
                  ><b class="btn btn-outline-light m-1">
                    Account {{number + 1 }}</b
                  ></a
                >
                {% endfor %}
              </div>
            </div>
            <div class="form-inline p-1">
              <a
                class="btn btn-outline-danger col-12"
                href="{{url_for('test')}}"
              >
                Exit Find
              </a>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 grid-margin">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Text colors</h4>
          <p class="card-description">
            Use class <code>.text-primary</code>,
            <code>.text-secondary</code> etc. for text in theme colors
          </p>
          <div class="row">
            <div class="col-md-6">
              {% for customer, account in join %}
              <p class="text-primary">{{customer.id}} {{customer.City}}</p>
              <p class="text-success">{{account.id}} {{account.Balance}}</p>
              <p class="text-danger">{{customer.GivenName}}</p>
              <p class="text-warning">{{customer.Surname}}</p>
              <p class="text-info">{{customer.Telephone}}</p>
              {% endfor %}
            </div>
            <div class="col-md-6">
              <p class="text-light bg-dark pl-1">.text-light</p>
              <p class="text-secondary">.text-secondary</p>
              <p class="text-dark">.text-dark</p>
              <p class="text-muted">.text-muted</p>
              <p class="text-white bg-dark pl-1">.text-white</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">List Of All Customers</h4>
          Page {{ page }} of {{ pages }}
          <div class="form-inline row grid-margin mt-1">
            <p class="card-description col-lg-7 mb-0">
              Use search to find a specific customer.
              <br />
              Search by either City, Name or ID
              <code><i class="mdi mdi-arrow-right"></i></code>
            </p>
            <div class="col-lg-5">
              <form method="get" class="input-group justify-content-end">
                <input
                  type="text"
                  name="search"
                  value="{{ q }}"
                  class="form-control col-lg-9"
                  placeholder="Search"
                  aria-label="Recipient's username"
                  aria-describedby="basic-addon2"
                />
                <div class="input-group-append">
                  <button
                    class="btn btn-md btn-primary d-flex align-items-center"
                    type="submit"
                  >
                    Search <i class="mdi mdi-magnify mr-0 ml-1"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-hover table-bordered">
              <thead>
                <tr>
                  <th>
                    Customer ID
                    <a
                      title="Sort Customer ID by ascending order "
                      href="{{  url_for('test',sortColumn='Customer ID',sortOrder='asc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-up"></i>
                    </a>
                    <a
                      title="Sort Customer ID by descending order"
                      href="{{  url_for('test',sortColumn='Customer ID',sortOrder='desc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-down"></i>
                    </a>
                  </th>
                  <th>
                    Birthday
                    <a
                      title="Sort Birthday by ascending order "
                      href="{{  url_for('test',sortColumn='Birthday',sortOrder='asc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-up"></i>
                    </a>
                    <a
                      title="Sort Birthday by descending order "
                      href="{{  url_for('test',sortColumn='Birthday',sortOrder='desc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-down"></i>
                    </a>
                  </th>
                  <th>
                    Name
                    <a
                      title="Sort Name by ascending order "
                      href="{{  url_for('test',sortColumn='Name',sortOrder='asc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-up"></i>
                    </a>
                    <a
                      title="Sort Name by descending order "
                      href="{{  url_for('test',sortColumn='Name',sortOrder='desc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-down"></i>
                    </a>
                  </th>
                  <th>
                    Streetaddress
                    <a
                      title="Sort Streetaddress by ascending order "
                      href="{{  url_for('test',sortColumn='Streetaddress',sortOrder='asc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-up"></i>
                    </a>
                    <a
                      title="Sort Streetaddress by descending order "
                      href="{{  url_for('test',sortColumn='Streetaddress',sortOrder='desc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-down"></i>
                    </a>
                  </th>
                  <th>
                    City
                    <a
                      title="Sort City by ascending order "
                      href="{{  url_for('test',sortColumn='City',sortOrder='asc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-up"></i>
                    </a>
                    <a
                      title="Sort City by descending order "
                      href="{{  url_for('test',sortColumn='City',sortOrder='desc', q = q ) }}"
                    >
                      <i class="mdi mdi-arrow-down"></i>
                    </a>
                  </th>
                </tr>
              </thead>
              <tbody>
                {% if kund %}
                <tr>
                  <td>{{kund.id}}</td>
                  <td>{{kund.Birthday}}</td>
                  <td class="text-danger">
                    {{kund.GivenName}} {{kund.Surname}}
                    <i class="mdi mdi-arrow-down"></i>
                  </td>
                  <td>{{kund.Streetaddress}}</td>

                  <td>
                    <label class="badge badge-danger">{{kund.City}}</label>
                  </td>
                </tr>
                {% else %} {% for customer in listOfCustomers %}

                <tr onclick="openLink()" class="tt-suggestion">
                  <td>{{customer.id}}</td>
                  <td>{{customer.Birthday}}</td>
                  <td class="text-danger">
                    {{customer.GivenName}} {{customer.Surname}}
                    <i class="mdi mdi-arrow-down"></i>
                  </td>
                  <td>{{customer.Streetaddress}}</td>

                  <td>
                    <label class="">{{customer.City}}</label>
                  </td>
                </tr>

                {% endfor %} {% endif %}
              </tbody>
              <tfooter>
                <tr>
                  <td class="text-left">
                    {% if has_prev %}
                    <a
                      class="badge badge-danger"
                      href="{{ url_for('test', page=page-1, sortColumn=sortColumn, sortOrder=sortOrder, q=q ) }}"
                    >
                      Prev
                    </a>
                    {% endif %}
                  </td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td class="text-right">
                    {% if has_next %}
                    <a
                      class="badge badge-danger"
                      href="{{ url_for('test', page=page+1, sortColumn=sortColumn, sortOrder=sortOrder,q=q) }}"
                    >
                      Next
                    </a>
                    {% endif %}
                  </td>
                </tr>
              </tfooter>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock main %}

<!-- Plugin js and custom js for this page -->
{% block individualJS %}
<script>
  function openLink() {
    window.open("{{url_for('test')}}");
  }
</script>
{% endblock individualJS %}
<!-- End plugin js and custom js for this page -->
